# FurnaceLog Environment Variables
# ========================================
# SECURITY WARNING:
# 1. NEVER commit .env files to git
# 2. Generate strong random secrets for production
# 3. These are REQUIRED variables - docker-compose will fail without them
# ========================================
# Copy this file to .env and update with your values

# ==========================================
# APPLICATION
# ==========================================
NODE_ENV=development
PORT=3000
FRONTEND_URL=http://localhost:5173

# ==========================================
# DATABASE - MongoDB
# ==========================================
# SECURITY: Use strong passwords (20+ chars, random) in production
# Generate with: openssl rand -base64 32
MONGO_ROOT_USER=admin
MONGO_ROOT_PASSWORD=CHANGE_THIS_TO_SECURE_PASSWORD_MIN_20_CHARS
MONGO_DATABASE=furnacelog
MONGODB_URI=mongodb://admin:CHANGE_THIS_TO_SECURE_PASSWORD_MIN_20_CHARS@localhost:27017/furnacelog?authSource=admin

# ==========================================
# CACHE - Redis
# ==========================================
# SECURITY: Use strong password (20+ chars, random)
# Generate with: openssl rand -base64 32
REDIS_PASSWORD=CHANGE_THIS_TO_SECURE_PASSWORD_MIN_20_CHARS
REDIS_URL=redis://:CHANGE_THIS_TO_SECURE_PASSWORD_MIN_20_CHARS@localhost:6379

# ==========================================
# OBJECT STORAGE - MinIO (S3-compatible)
# ==========================================
# SECURITY: NEVER use default minioadmin/minioadmin in production
# Access key: 20+ chars, Secret key: 40+ chars
# Generate with: openssl rand -base64 48
MINIO_ROOT_USER=CHANGE_THIS_MIN_20_CHARS
MINIO_ROOT_PASSWORD=CHANGE_THIS_MIN_40_CHARS
MINIO_ENDPOINT=localhost
MINIO_PORT=9000
MINIO_USE_SSL=false
MINIO_ACCESS_KEY=CHANGE_THIS_MIN_20_CHARS
MINIO_SECRET_KEY=CHANGE_THIS_MIN_40_CHARS
MINIO_BUCKET_DOCUMENTS=furnacelog-documents
MINIO_BUCKET_IMAGES=furnacelog-images
MINIO_BUCKET_AVATARS=furnacelog-avatars

# ==========================================
# AUTHENTICATION
# ==========================================
# SECURITY: Generate with: node -e "console.log(require('crypto').randomBytes(64).toString('base64'))"
# Rotate every 90 days in production
JWT_SECRET=CHANGE_THIS_TO_RANDOM_64_BYTE_BASE64_STRING
JWT_EXPIRES_IN=7d
JWT_REFRESH_SECRET=CHANGE_THIS_TO_DIFFERENT_RANDOM_64_BYTE_BASE64_STRING
JWT_REFRESH_EXPIRES_IN=30d
# SECURITY FIX: CSRF protection secret
CSRF_SECRET=CHANGE_THIS_TO_RANDOM_64_BYTE_BASE64_STRING

# ==========================================
# EMAIL - SMTP
# ==========================================
SMTP_HOST=localhost
SMTP_PORT=1025
SMTP_SECURE=false
SMTP_USER=
SMTP_PASSWORD=
SMTP_FROM=noreply@furnacelog.com
SMTP_FROM_NAME=FurnaceLog

# Production SMTP Example (e.g., SendGrid, Mailgun, AWS SES)
# SMTP_HOST=smtp.sendgrid.net
# SMTP_PORT=587
# SMTP_SECURE=false
# SMTP_USER=apikey
# SMTP_PASSWORD=your-sendgrid-api-key

# ==========================================
# WEATHER API
# ==========================================
WEATHER_API_KEY=your-environment-canada-api-key
WEATHER_API_URL=https://api.weather.gc.ca

# ==========================================
# FILE UPLOAD
# ==========================================
MAX_FILE_SIZE=5242880
MAX_FILES_PER_UPLOAD=20
ALLOWED_FILE_TYPES=image/jpeg,image/png,image/gif,image/webp,application/pdf,application/msword,application/vnd.openxmlformats-officedocument.wordprocessingml.document

# ==========================================
# RATE LIMITING
# ==========================================
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100

# ==========================================
# CORS
# ==========================================
CORS_ORIGIN=http://localhost:5173,http://localhost:3000

# ==========================================
# LOGGING
# ==========================================
LOG_LEVEL=debug
LOG_FORMAT=dev

# ==========================================
# PAYMENT - Stripe (for provider subscriptions)
# ==========================================
STRIPE_SECRET_KEY=sk_test_your_stripe_secret_key
STRIPE_PUBLISHABLE_KEY=pk_test_your_stripe_publishable_key
STRIPE_WEBHOOK_SECRET=whsec_your_webhook_secret
STRIPE_PREMIUM_PRICE_ID=price_premium_monthly
STRIPE_PRO_PRICE_ID=price_pro_monthly

# ==========================================
# FRONTEND BUILD VARIABLES
# ==========================================
VITE_API_URL=http://localhost:3000/api/v1
VITE_APP_NAME=FurnaceLog
VITE_MINIO_PUBLIC_URL=http://localhost:9000
VITE_STRIPE_PUBLISHABLE_KEY=pk_test_your_stripe_publishable_key

# ==========================================
# DOKPLOY PRODUCTION OVERRIDES
# ==========================================
# These will be set in Dokploy environment variables
# MONGODB_URI=mongodb://user:pass@your-server-ip:27017/furnacelog
# REDIS_URL=redis://:password@your-server-ip:6379
# MINIO_ENDPOINT=your-server-ip
# FRONTEND_URL=https://furnacelog.yourdomain.com
# CORS_ORIGIN=https://furnacelog.yourdomain.com
# NODE_ENV=production
