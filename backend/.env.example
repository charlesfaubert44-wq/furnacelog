# =============================================================================
# FURNACELOG BACKEND ENVIRONMENT CONFIGURATION
# =============================================================================
# SECURITY WARNING: Never commit .env files to version control!
# This is a template file (.env.example) - copy to .env and update values
# =============================================================================

# -----------------------------------------------------------------------------
# Server Configuration
# -----------------------------------------------------------------------------
NODE_ENV=development
PORT=3000
HOST=0.0.0.0

# -----------------------------------------------------------------------------
# Database Configuration
# -----------------------------------------------------------------------------
# SECURITY: Use strong passwords (20+ characters, random)
# SECURITY: Different credentials for each environment (dev/staging/prod)
# SECURITY: Never use default credentials in production
# Format: mongodb://username:password@host:port/database?authSource=admin
MONGODB_URI=mongodb://admin:CHANGE_ME_TO_STRONG_PASSWORD@mongodb:27017/furnacelog?authSource=admin

# -----------------------------------------------------------------------------
# Redis Configuration
# -----------------------------------------------------------------------------
# SECURITY: Set a strong password (not 'changeme' or default)
# SECURITY: Use different passwords for each environment
REDIS_URL=redis://:CHANGE_ME_TO_STRONG_PASSWORD@redis:6379
REDIS_PASSWORD=CHANGE_ME_TO_STRONG_PASSWORD
REDIS_HOST=localhost
REDIS_PORT=6379

# -----------------------------------------------------------------------------
# MinIO / S3 Configuration
# -----------------------------------------------------------------------------
# SECURITY: Change from defaults (minioadmin is NOT secure)
# SECURITY: Access key should be 20+ characters
# SECURITY: Secret key should be 40+ characters, random
MINIO_ENDPOINT=minio
MINIO_PORT=9000
MINIO_USE_SSL=false
MINIO_ACCESS_KEY=CHANGE_ME_TO_RANDOM_ACCESS_KEY
MINIO_SECRET_KEY=CHANGE_ME_TO_LONG_RANDOM_SECRET_KEY_40_CHARS_MIN
MINIO_BUCKET_DOCUMENTS=furnacelog-documents
MINIO_BUCKET_IMAGES=furnacelog-images
MINIO_BUCKET_AVATARS=furnacelog-avatars

# -----------------------------------------------------------------------------
# JWT Configuration
# -----------------------------------------------------------------------------
# SECURITY: Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('base64'))"
# SECURITY: Rotate every 90 days in production
# SECURITY: NEVER commit real secrets to git
# SECURITY: Use different secrets for each environment
# SECURITY: Access token should expire quickly (15m recommended)
# SECURITY: Refresh token can be longer (7d recommended, max 30d)
JWT_SECRET=CHANGE_ME_TO_RANDOM_32_BYTE_BASE64_STRING
JWT_EXPIRES_IN=15m
JWT_REFRESH_SECRET=CHANGE_ME_TO_DIFFERENT_RANDOM_32_BYTE_BASE64_STRING
JWT_REFRESH_EXPIRES_IN=7d

# -----------------------------------------------------------------------------
# SMTP Configuration (Email)
# -----------------------------------------------------------------------------
# SECURITY: Use app-specific password if available (Gmail, Outlook)
# SECURITY: Never use personal email password
# SECURITY: Enable 2FA on email account
SMTP_HOST=mailhog
SMTP_PORT=1025
SMTP_SECURE=false
SMTP_USER=
SMTP_PASSWORD=CHANGE_ME_TO_SMTP_APP_PASSWORD
SMTP_FROM=noreply@furnacelog.com

# -----------------------------------------------------------------------------
# URL Configuration
# -----------------------------------------------------------------------------
# SECURITY: Use HTTPS in production (https://)
# Frontend URL (used for OAuth redirects and email links)
FRONTEND_URL=http://localhost:5173

# API URL (used for OAuth callbacks)
API_URL=http://localhost:3000

# -----------------------------------------------------------------------------
# CORS Configuration
# -----------------------------------------------------------------------------
# SECURITY: Set to specific domains in production (never use *)
# SECURITY: Include protocol (http:// or https://)
# Format: Comma-separated list of allowed origins
# For production: CORS_ORIGIN=https://furnacelog.com,https://www.furnacelog.com
# For development: CORS_ORIGIN=http://localhost:5173,http://localhost:3000
CORS_ORIGIN=http://localhost:5173,http://localhost:3000

# -----------------------------------------------------------------------------
# OAuth Credentials (Optional)
# -----------------------------------------------------------------------------
# SECURITY: Get from provider dashboard
# SECURITY: Use different credentials for dev/staging/production
# SECURITY: Restrict redirect URIs in provider dashboard
# SECURITY: Never expose client secrets in frontend code

# Google OAuth - Get credentials from https://console.cloud.google.com/
GOOGLE_CLIENT_ID=your-google-client-id.apps.googleusercontent.com
GOOGLE_CLIENT_SECRET=CHANGE_ME_TO_GOOGLE_CLIENT_SECRET

# Facebook OAuth - Get credentials from https://developers.facebook.com/
FACEBOOK_APP_ID=your-facebook-app-id
FACEBOOK_APP_SECRET=CHANGE_ME_TO_FACEBOOK_APP_SECRET

# -----------------------------------------------------------------------------
# Weather API Configuration
# -----------------------------------------------------------------------------
# SECURITY: Protect API keys - they may have usage limits/billing
WEATHER_API_KEY=CHANGE_ME_TO_WEATHER_API_KEY
WEATHER_API_URL=https://api.weather.gc.ca

# -----------------------------------------------------------------------------
# File Upload Configuration
# -----------------------------------------------------------------------------
# Max file size in bytes (default: 5MB = 5242880 bytes)
MAX_FILE_SIZE=5242880
# Max files per upload request
MAX_FILES_PER_UPLOAD=20

# -----------------------------------------------------------------------------
# Rate Limiting Configuration
# -----------------------------------------------------------------------------
# SECURITY: Prevents brute force and DDoS attacks
# Window in milliseconds (default: 15 minutes = 900000ms)
RATE_LIMIT_WINDOW_MS=900000
# Max requests per window per IP
RATE_LIMIT_MAX_REQUESTS=100

# -----------------------------------------------------------------------------
# Security Configuration
# -----------------------------------------------------------------------------
# SECURITY: Enable in production
ENABLE_HTTPS=false
COOKIE_SECURE=false

# -----------------------------------------------------------------------------
# IoT / MQTT Configuration
# -----------------------------------------------------------------------------
# MQTT broker for sensor data ingestion
# If using docker-compose.iot.yml, set MQTT_HOST to 'mosquitto'
# For development without MQTT, set MQTT_DISABLED=true (sensors use HTTP POST)
# Leave USERNAME and PASSWORD empty if MQTT broker doesn't require authentication
MQTT_HOST=localhost
MQTT_PORT=1883
MQTT_USERNAME=CHANGE_ME_OR_LEAVE_EMPTY
MQTT_PASSWORD=CHANGE_ME_OR_LEAVE_EMPTY
MQTT_DISABLED=false

# -----------------------------------------------------------------------------
# CSRF Protection
# -----------------------------------------------------------------------------
# SECURITY: Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('base64'))"
CSRF_SECRET=CHANGE_ME_TO_RANDOM_32_BYTE_BASE64_STRING

# =============================================================================
# SECURITY REMINDERS
# =============================================================================
# 1. Copy this file to .env and update all CHANGE_ME values
# 2. Never commit .env files to git (only .env.example)
# 3. Use different values for dev/staging/production
# 4. Rotate secrets every 90 days in production
# 5. Use strong, random passwords (20+ chars)
# 6. Generate JWT secrets with crypto.randomBytes(32)
# 7. Review SECURITY.md for complete security guidelines
# =============================================================================
